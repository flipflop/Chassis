require.def("couchdb/couchdb",["core/trace","core/lib","i18n!nls/couchDB"],function(a,b,c){var d={uri:"http://har.couchone.com/har",initialize:function(a){var d=a.getTab("Preview");d.toolbar.addButton({label:c.save,tooltiptext:c.saveToCouchDB,command:b.bindFixed(this.onSave,this)})},onSave:function(){this.saveHar(this.model.toJSON(),{success:function(b){a.log("HAR sucessfully uploaded",b)}})},saveHar:function(b,c){c=c||{},$.ajax({type:"POST",url:this.uri,contentType:"application/json",context:this,data:b,success:function(b){var d=jQuery.parseJSON(req.responseText);req.status==201?(doc._id=d.id,doc._rev=d.rev,c.success&&c.success(d)):c.error?c.error(req.status,d.error,d.reason):a.error("The document could not be saved: "+d.reason)},error:function(b,d){c.error?c.error(req.status,b.error,b.reason):a.error("The document could not be saved: "+b.reason)}})}};return d})